!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Fireworks=i():t.Fireworks=i()}(window,function(){return function(t){var i={};function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(e,n,function(i){return t[i]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.random=function(t,i){return Math.random()*(i-t)+t},i.TAU=2*Math.PI},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(2);i.default=class{constructor(t,{rocketSpawnInterval:i=150,maxRockets:s=3,numParticles:n=100,explosionMinHeight:o=.2,explosionMaxHeight:h=.9,explosionChance:r=.08}={}){this.rocketSpawnInterval=i,this.maxRockets=s,this.cw=t.clientWidth,this.ch=t.clientHeight,this.max_h=this.ch*(1-h),this.min_h=this.ch*(1-o),this.chance=r,this.canvas=document.createElement("canvas"),this.canvas.width=this.cw,this.canvas.height=this.ch,this.ctx=this.canvas.getContext("2d"),t.appendChild(this.canvas),this.things=new e.default({maxRockets:this.maxRockets,numParticles:n,cw:this.cw,ch:this.ch})}destroy(){this.canvas.parentElement.removeChild(this.canvas),window.clearInterval(this.interval),window.cancelAnimationFrame(this.rafInterval)}start(){return this.maxRockets>0&&(this.interval=setInterval(()=>this.things.spawnRockets(),this.rocketSpawnInterval),this.rafInterval=window.requestAnimationFrame(()=>this.update())),()=>this.stop()}stop(){window.clearInterval(this.interval),this.interval=null}kill(){this.things.clear(),this.stop(),window.cancelAnimationFrame(this.rafInterval),this.rafInterval=null,this._clear(!0)}fire(){this.things.spawnRocket(),this.rafInterval||(this.rafInterval=window.requestAnimationFrame(()=>this.update()))}_clear(t=!1){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0 ${t?"":", 0.5"})`,this.ctx.fillRect(0,0,this.cw,this.ch),this.ctx.globalCompositeOperation="lighter"}update(){this._clear();for(const t of this.things)t.draw(this.ctx),t.update(),t.shouldRemove(this.cw,this.ch)?this.things.delete(t):t.shouldExplode(this.max_h,this.min_h,this.chance)&&this.things.explode(t);this.interval||this.things.size>0?this.rafInterval=window.requestAnimationFrame(()=>this.update()):(this._clear(!0),this.rafInterval=null)}}},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(3),n=s(0);i.default=class extends Set{constructor({maxRockets:t,numParticles:i,cw:s,ch:e}){super(),this.rockets=0,this.maxRockets=t,this.numParticles=i,this.cw=s,this.ch=e}explode(t){this.rockets--;for(let i=0;i<this.numParticles;i+=1)this.add(t.clone());this.delete(t)}spawnRocket(){this.rockets++,this.add(new e.default({isRocket:!0,position:{x:n.random(0,this.cw),y:this.ch}}))}spawnRockets(){this.rockets<this.maxRockets&&this.spawnRocket()}}},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(0);class n{constructor({isRocket:t=!1,hue:i=e.random(1,360),brightness:s=e.random(50,60),position:n}){if(this.isRocket=t,this.position=n,this.positions=[this.position,this.position,this.position],this.isRocket)this.velocity={x:e.random(-3,3),y:e.random(-7,-3)},this.shrink=.999,this.resistance=1;else{const t=e.random(0,e.TAU),i=15*Math.cos(e.random(0,e.TAU));this.velocity={x:Math.cos(t)*i,y:Math.sin(t)*i},this.shrink=e.random(0,.05)+.93,this.resistance=.92}this.gravity=.01,this.size=3,this.alpha=1,this.fade=0,this.hue=i,this.brightness=s}clone(){return new n({position:{x:this.position.x,y:this.position.y},hue:this.hue,brightness:this.brightness})}shouldRemove(t,i){return this.alpha<=.1||this.size<=1||(this.position.x>t||this.position.x<0||(this.position.y>i||this.position.y<0))}shouldExplode(t,i,s){return!!this.isRocket&&(this.position.y<=t||!(this.position.y>=i)&&e.random(0,1)<=s)}update(){this.positions.pop(),this.positions.unshift({x:this.position.x,y:this.position.y}),this.velocity.x*=this.resistance,this.velocity.y*=this.resistance,this.velocity.y+=this.gravity,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.size*=this.shrink,this.alpha-=this.fade}draw(t){const i=this.positions[this.positions.length-1];t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(this.position.x,this.position.y),t.lineWidth=this.size,t.strokeStyle=`hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`,t.stroke()}}i.default=n}]).default});