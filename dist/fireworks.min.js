!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Fireworks=i():t.Fireworks=i()}("undefined"!=typeof self?self:this,function(){return function(t){function i(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var s={};return i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=1)}([function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.random=function(t,i){return Math.random()*(i-t)+t},i.TAU=2*Math.PI},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(2),o=s(3);class n{constructor(t,{rocketSpawnInterval:i=150,maxRockets:s=3,numParticles:n=100,explosionHeight:h=.2,explosionChance:c=.08}={}){this.rocketSpawnInterval=i,this.maxRockets=s,this.numParticles=n,this.explosionHeight=h,this.explosionChance=c,this.cw=t.clientWidth,this.ch=t.clientHeight,this.graphics=new e.default(t),this.things=new o.default({maxRockets:this.maxRockets,cw:this.cw,ch:this.ch}),t.appendChild(this.graphics.canvas)}start(){return window.requestAnimationFrame(()=>this.update()),this.interval=setInterval(()=>this.things.spawnRockets(),this.rocketSpawnInterval),()=>this.stop()}stop(){window.clearInterval(this.interval),this.interval=null}update(){this.graphics.clear();for(const t of this.things)this.graphics.drawParticle(t)?(t.update(),t.shouldExplode(this.ch,this.explosionHeight,this.explosionChance)&&(t.explode(this.numParticles).forEach(this.things.add,this.things),this.things.delete(t))):this.things.delete(t);this.interval||this.things.size>0?window.requestAnimationFrame(()=>this.update()):this.graphics.clear(!0)}}i.default=n},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class e{constructor(t){this.cw=t.clientWidth,this.ch=t.clientHeight;const i=document.createElement("canvas");i.width=this.cw,i.width=this.ch,this._canvas=document.createElement("canvas"),this.ctx=this._canvas.getContext("2d"),this.canvas.width=this.cw,this.canvas.height=this.ch}get canvas(){return this._canvas}clear(t=!1){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0 ${t?"":", 0.5"})`,this.ctx.fillRect(0,0,this.cw,this.ch),this.ctx.globalCompositeOperation="lighter"}drawParticle(t){const i=t.positions[t.positions.length-1];return this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(t.position.x,t.position.y),this.ctx.lineWidth=t.size,this.ctx.strokeStyle=`hsla(${t.hue}, 100%, ${t.brightness}%, ${t.alpha})`,this.ctx.stroke(),!(t.alpha<=.1||t.size<=1)&&(!(t.position.x>this.cw||t.position.x<0)&&!(t.position.y>this.ch||t.position.y<0))}}i.default=e},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(4),o=s(0);class n extends Set{constructor({maxRockets:t,cw:i,ch:s}){super(),this.maxRockets=t,this.cw=i,this.ch=s}spawnRockets(){this.rockets<this.maxRockets&&this.add(new e.default({isRocket:!0,position:{x:o.random(0,this.cw),y:this.ch}}))}get rockets(){return[...this].filter(t=>t.isRocket).length}}i.default=n},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(0);class o{constructor({isRocket:t=!1,hue:i=e.random(1,360),brightness:s=e.random(50,60),position:o}){if(this.isRocket=t,this.position=o,this.positions=[this.position,this.position,this.position],this.velocity={x:null,y:null},this.isRocket)this.velocity={x:e.random(0,6)-3,y:e.random(-3,0)-4},this.shrink=.999,this.resistance=1;else{const t=e.random(0,e.TAU),i=15*Math.cos(e.random(0,e.TAU));this.velocity={x:Math.cos(t)*i,y:Math.sin(t)*i},this.shrink=e.random(0,.05)+.93,this.resistance=.92}this.gravity=.01,this.size=3,this.alpha=1,this.fade=0,this.hue=i,this.brightness=s}shouldExplode(t,i,s){if(!this.isRocket)return!1;if(!(this.position.y<=t*(1-i)))return!1;return e.random(0,1)<=s}explode(t){const i=new Set;for(let s=0;s<t;s+=1)i.add(new o({position:{x:this.position.x,y:this.position.y},hue:this.hue,brightness:this.brightness}));return i}update(){this.positions.pop(),this.positions.unshift({x:this.position.x,y:this.position.y}),this.velocity.x*=this.resistance,this.velocity.y*=this.resistance,this.velocity.y+=this.gravity,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.size*=this.shrink,this.alpha-=this.fade}}i.default=o}]).default});